---
description: Always read PRD before making changes
alwaysApply: true
---

# Project Context

Before making any code changes, always read the PRD (Product Requirements Document) at `PRD.md` in the project root.

## Codebase language: English only

- **All code must be in English**: file names, folder names, variable names, function names, type names, constants, and **all comments** (including JSDoc and inline comments).
- **UI / copy may be in any language**: user-facing strings (labels, placeholders, toast messages, page titles, button text) can remain in Turkish or another language for localization. Only the code layer (identifiers + comments) is English-only.

## Required Actions

1. **Read PRD first** - Understand the project requirements and coding guidelines
2. **Follow Section 6 - Coding Guidelines** - Especially:
   - Always use shadcn/ui components
   - Follow shadcn documentation for recommended approaches
   - No hacky CSS solutions or workarounds
   - Extend components properly with props

## shadcn/ui Usage - CRITICAL

**Documentation:** https://ui.shadcn.com/docs

- **NEVER develop custom UI components** - Only use shadcn/ui native components
- **NEVER customize component internals** - Use components as-is from shadcn
- **NEVER write wrapper components** - Always use native components directly. If a wrapper seems necessary, you're likely using the component incorrectly. Find the correct native pattern instead.
- Always check shadcn docs before implementing any UI feature
- Use proper component props instead of CSS hacks
- When extending components, add new props (e.g., `stickyHeader` for Table)
- For features not available in shadcn, search shadcn docs/patterns first

### Component Structure - ALWAYS FOLLOW NATIVE PATTERNS

**shadcn components have specific parent-child relationships. Always follow the native structure.**

- **Study the component source** before using complex components (Sidebar, Table, Form, etc.)
- **Never nest components incorrectly** (e.g., putting `SidebarGroupLabel` inside `SidebarGroupContent`)
- **Never use custom flex/grid layouts** that break the component's intended structure
- If a layout doesn't work naturally with shadcn structure, you're doing it wrong — find the correct pattern

```tsx
// ❌ BAD - Breaking native Sidebar structure
<SidebarGroup>
  <SidebarGroupContent className="flex flex-row justify-between">
    <SidebarGroupLabel>Label</SidebarGroupLabel>
    <SomeControl />
  </SidebarGroupContent>
</SidebarGroup>

// ✅ GOOD - Following native Sidebar structure
<SidebarGroup>
  <SidebarGroupLabel>Label</SidebarGroupLabel>
  <SidebarGroupContent>
    <SomeControl />
  </SidebarGroupContent>
</SidebarGroup>
```

This rule applies to ALL shadcn components: Sidebar, Table, Form, Dialog, Sheet, etc.

## Examples

```typescript
// ❌ BAD - Custom icon positioning
<div className="relative">
  <IconSearch className="absolute left-3 top-1/2 ..." />
  <Input className="pl-9" />
</div>

// ✅ GOOD - Use shadcn native Input
<Input type="search" placeholder="Search..." />
```

```typescript
// ❌ BAD - Hacky overflow solution
<div className="overflow-auto max-h-[calc(100vh-200px)]">
  <Table>...</Table>
</div>

// ✅ GOOD - Proper component prop
<Table stickyHeader>
  <TableHeader className="sticky top-0">...</TableHeader>
</Table>
```

## Form Spacing - ALWAYS USE THESE VALUES

For consistent form layouts across the app, always use these Tailwind spacing classes:

| Purpose | Class | Value |
|---------|-------|-------|
| **Between form sections** (field groups) | `space-y-6` | 24px |
| **Within field group** (label → input → description) | `space-y-3` | 12px |
| **Grid gap** (for side-by-side fields) | `gap-4` | 16px |

### Form Structure Example

```tsx
// ✅ CORRECT form spacing
<div className="space-y-6 py-4">           {/* Section spacing */}
  <div className="grid grid-cols-2 gap-4"> {/* Side-by-side fields */}
    <div className="space-y-3">            {/* Field group spacing */}
      <Label>Field 1</Label>
      <Input />
    </div>
    <div className="space-y-3">
      <Label>Field 2</Label>
      <Input />
    </div>
  </div>
  <div className="space-y-3">              {/* Another field group */}
    <Label>Field 3</Label>
    <Select>...</Select>
    <p className="text-xs text-muted-foreground">Helper text</p>
  </div>
</div>
```

```tsx
// ❌ BAD - Inconsistent or arbitrary spacing
<div className="space-y-4 py-4">
  <div className="space-y-2">
    <Label>...</Label>
    <Input />
  </div>
</div>
```

## Button Loading States - USE `loading` PROP

For all buttons that trigger async operations (API calls, form submissions, etc.), use the `loading` prop:

```tsx
import { Button } from "@/components/ui/button"

// ❌ BAD - Replacing button text during loading
<Button onClick={handleSubmit} disabled={isSubmitting}>
  {isSubmitting ? "Oluşturuluyor..." : "Oluştur"}
</Button>

// ❌ BAD - Manual spinner implementation
<Button onClick={handleSubmit} disabled={isSubmitting}>
  {isSubmitting && <Spinner />}
  Oluştur
</Button>

// ✅ GOOD - Use loading prop
<Button onClick={handleSubmit} loading={isSubmitting}>
  Oluştur
</Button>
```

The `loading` prop on Button:
- Shows centered Spinner that replaces the button text visually
- Keeps children invisible in DOM to preserve button width
- Automatically disables the button during loading
- Uses native shadcn Spinner component internally

## Dropdowns / Predefined Options - USE ICON + TEXT

When presenting predefined choices to the user (e.g. `DropdownMenuItem`, `SelectItem`, command items, or any menu with fixed options), **always use icon + text** for each option. Apply this pattern everywhere in the project.

- Use a leading icon before the label (e.g. `IconPencil` for edit, `IconTrash` for delete).
- Icon: `className="mr-2 size-4"` so text aligns consistently.
- Keeps the UI consistent and scannable across Ledger, Categories, Accounts, and any future screens.

### Example (DropdownMenu)

```tsx
// ❌ BAD - Text only
<DropdownMenuItem onClick={onEdit}>
  Düzenle
</DropdownMenuItem>
<DropdownMenuItem variant="destructive" onClick={onDelete}>
  Sil
</DropdownMenuItem>
```

```tsx
// ✅ GOOD - Icon + text
<DropdownMenuItem onClick={onEdit}>
  <IconPencil className="mr-2 size-4" />
  Düzenle
</DropdownMenuItem>
<DropdownMenuItem variant="destructive" onClick={onDelete}>
  <IconTrash className="mr-2 size-4" />
  Sil
</DropdownMenuItem>
```

Use the same pattern for other predefined-option UIs (e.g. Select items, Command lists) when each option has a clear semantic action or type.
